<div class="card">
	<div class="card-header text-white bg-info">
		S'enregistrer
	</div>
	<div class="card-body">
		<form [formGroup]="registerForm" (ngSubmit)="saveUser()" novalidate>
			<div class="row">
				<div class="col-md-6 mb-3">
					<label>Nom</label>
					<input type="text" class="form-control" placeholder="Nom" formControlName="lastName"
						[ngClass]="{'is-invalid': registerForm.get('lastName')?.touched  &&   registerForm.get('lastName')?.invalid}">

					<div class="invalid-feedback">
						<span *ngIf="registerForm.get('lastName')?.errors?.['required']">Entrer votre nom</span>
						<span *ngIf="registerForm.get('lastName')?.errors?.['minlength']">Minimum 4 caractères
							requis</span>
					</div>
				</div>

				<div class="col-md-6 mb-3">
					<label>Prenom</label>
					<input type="text" class="form-control" placeholder="Prenom" formControlName="firstName"
						[ngClass]="{'is-invalid': registerForm.get('firstName')?.touched && registerForm.get('firstName')?.invalid}">

					<div class="invalid-feedback">
						<span *ngIf="registerForm.get('firstName')?.errors?.['required']">Entrer votre prénom</span>
						<span *ngIf="registerForm.get('firstName')?.errors?.['maxlength']">Maximum 20 caractères
							requis</span>
					</div>
				</div>
			</div>
			<div class="row" formGroupName="emailGroup">
				<div class="col-md-6 mb-3">
					<label>E-Mail</label>
					<input type="email" class="form-control" placeholder="E-Mail" formControlName="email"
						[ngClass]="{'is-invalid': registerForm.get('emailGroup')?.errors || (registerForm.get('emailGroup.email')?.touched && registerForm.get('emailGroup.email')?.invalid)}">

					<div class="invalid-feedback">
						<span *ngIf=" registerForm.get('emailGroup.email')?.errors?.['required']">Entrer votre email</span>
						<span *ngIf="registerForm.get('emailGroup.email')?.errors?.['email']">Email invalide</span>
					</div>
				</div>
				<div class="col-md-6 mb-3">
					<label for="confirmEmailId">Confirmer le mail</label>
					<input type="email" id="confirEmailId" class="form-control"
					placeholder="Confirmer l'email"
					formControlName="confirmEmail"
					[ngClass]="{'is-invalid': registerForm.get('emailGroup')?.errors || ((
						registerForm.get('emailGroup.confirmEmail')?.touched || registerForm.get('emailGroup.confirmEmail')?.dirty) &&  
						registerForm.get('emailGroup.confirmEmail')?.invalid)}"
					>
					<div class="invalid-feedback">
						<span *ngIf="registerForm.get('emailGroup.confirmEmail')?.errors?.['required']">Merci de confirmer votre email</span>
						<span *ngIf="registerForm.get('emailGroup.confirmEmail')?.touched  && registerForm.get('emailGroup.confirmEmail')?.errors?.['email']">Merci de rentrer un email valide</span>
						<span *ngIf=" registerForm.get('emailGroup.confirmEmail')?.valid &&registerForm.get('emailGroup')?.errors?.['match']">L'email ne correspond pas</span>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-6 mb-3">
					<label for="phoneId">Telephone</label>
					<input type="tel" class="form-control" 
					formControlName="phone"
					placeholder="Numero de tel"
					[ngClass]="{'is-invalid': registerForm.get('phone')?.touched && registerForm.get('phone')?.invalid }"
					>
					<div class="invalid-feedback">
						<span *ngIf="registerForm.get('phone')?.errors?.['required'] "
						>
							Veuillez rentrer votre numero de telephone.
						</span>
					</div>
				</div>

				<div class="col-md-6 mb-3">
					<label for="">Recevoir les notifications</label>
					<div class="col-md-8 mb-3">
						<div class="form-check form-check-inline">
							<label class="form-check-label">
								<input type="radio" 
								class="form-check-input"
								value="email"
								formControlName="notification"
								>
								E-mail
							</label>
						</div>
						<div class="form-check form-check-inline">
							<label class="form-check-label">
								<input type="radio" 
								class="form-check-input"
								value="text"
								formControlName="notification"
								>
								Tel
							</label>
						</div>
					</div>
				</div>
			</div>

			<div class="row mb-3">
				<div class="col-md-6">
					<label for="ratingId">Note</label>
					<input type="number" id="ratingId" class="form-control" formControlName="rating"
					[ngClass]="{'is-invalid' :( registerForm.get('rating')?.touched || registerForm.get('rating')?.dirty ) && registerForm.get('rating')?.invalid}"
				>
				<div class="invalid-feedback">
					<span *ngIf="registerForm.get('rating')?.errors?.['rangeError']">
						Veuillez noter nos services sur une echelle de 1 à 5.
					</span>
				</div>
				</div>
				<div class="col-md-6">
					<div class="form-check mt-4">
						<label for="sendCatalogId" class="form-check-label">
							<input type="checkbox" class="form-check-input" formControlName="sendCatalog">
							Oui, je souhaite recevoir la publicité.
						</label>
					</div>
				</div>
			</div>

			<!-- <div *ngIf="user.sendCatalog">
				<div class="row mb-3">
					<div class="col-md-12">
						<label for="">Adresse 1:</label>
						<input type="text" class="form-control">
					</div>
				</div>
				<div class="row mb-3">
					<div class="col-md-12">
						<label for="">Adresse 2:</label>
						<input type="text" class="form-control">
					</div>
				</div>

				<div class="row">
					<div class="col-md-6 mb-3">
						<label for="">Ville</label>
						<input type="text" class="form-control">
					</div>
					<div class="col-md-3 mb-3">
						<label for="">Departement</label>
						<select type="text" class="form-control">
							<option value="">Selectionner un departement</option>
							<option value="A">A</option>
							<option value="B">B</option>
							<option value="C">C</option>
							<option value="D">D</option>
						</select>
					</div>
					<div class="col-md-3">
						<label for="">Code Postal</label>
						<input type="number" class="form-control">
					</div>
				</div>
			</div>
 -->
 			


			<div class="text-right">
				<button type="button" class="btn btn-outline-info me-2" (click)="fillRegisterForm()">Remplir les champs
					par defaut</button>
				<button type="submit" class="btn btn-info" [disabled]="registerForm.invalid">
					Sauvegarder
				</button>
			</div>
		</form>
	</div>
</div>

<br>
<hr>
<p>Values</p>
<pre>{{registerForm.value | json}}</pre>